<!DOCTYPE HTML>

{% load static %}

<html>
	<head>
		<title>Genetics Ark</title>
		<meta name="description" content="" />
		<meta name="keywords" content="" />

		<!-- Bootstrap Required Metadata -->
		<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- jQuery JS v3.6.0 -->
		<script src="{% static 'js/jquery-3.6.1.min.js' %}"></script>

		<!-- Main CSS -->
		<link rel="stylesheet" type='text/css' href="{% static 'css/main.css' %}"/>

		<!-- Bootstrap 4 CSS -->
		<link rel="stylesheet" type='text/css' href="{% static 'css/bootstrap.min.css' %}"/>

		<!-- Bootstrap JS -->
		<script rel="stylesheet" src="{% static 'js/popper.min.js' %}"></script>

		<!-- IGV JS v2.12.6 -->
		<script type="text/javascript" src="{% static 'js/igv.min.js' %}"></script>

		<link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.ico' %}"/>
		{% block css %}{% endblock %}
	</head>
	<body>
		<!-- Navbar -->
		<nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #2e738e;">
			<a class="navbar-brand text-white font-weight-bold navbar-logo" href="/genetics_ark">GENETICS ARK</a>

			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav ml-auto pr-4">
					<li class="nav-item">
						<a class="nav-link text-white" href="/genetics_ark/primer_designer">Primer Designer</a>
					</li>
					<li class="nav-item">
						<a class="nav-link text-white" href="/genetics_ark/igv">IGV</a>
					</li>
					<li class="nav-item">
						<a class="nav-link text-white" target="_blank" href="{{ desk }}">Service Desk</a>
					</li>
					<li class="nav-item">
						<a class="nav-link text-white" target="_blank" href="{{ iva }}">IVA</a>
					</li>
				</ul>
			</div>
		</nav>

		<!-- Error Message -->
		{% if messages %}
			{% for message in messages %}
				<div id="message" class="alert {{ message.tags }}" role="alert">
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<div class="row text-center">
						<div data-value="{{ message }}" id="messageContent" class="col-12">
							{{ message }}
							<button type="button" class="btn btn-warning mx-2 btn-sm border-dark px-1 py-0" onclick="copyToClipboard('messageContent', 1)">click here to copy the error message</button>
							<span id="custom-tooltip-1" class="ml-2 mt-1 badge badge-success" style="position:absolute;display:none;">COPIED</span>
						</div>
						<div class="col mt-2">
							<a href="{{ desk }}" class="btn btn-info btn-sm px-2 py-0 border-dark font-weight-bold" target="_blank">click here to contact bioinformatics helpdesk</a>
						</div>
					</div>
				</div>
			{% endfor %} 
		{% endif %}

		{% block body %}
		<!-- body block for inheriting page content -->
		{% endblock %}
		
		<!-- Custom JS Script for MenuBar, IndexPage Banner -->
		<script src="{% static 'js/breakpoints.min.js' %}"></script>
		<script src="{% static 'js/util.js' %}"></script>
		<script src="{% static 'js/main.js' %}"></script>

		{% block script %}
		<!-- optional script -->
		{% endblock %}
		
		<script>
			$(document).ready(function() {
				// check if element 'message' exist
				s = !!document.getElementById('message');
				// function to fade messages out
				if (s == true) {
					var s = document.getElementById('message').style;
					s.opacity = 1;
					setTimeout(() => {(function fade(){(s.opacity-=.01)<0?s.display="none":setTimeout(fade,15)})(); }, 15000);
				}
			});
			
			$(function () {
				$('[data-toggle="tooltip"]').tooltip()
			})
			//Function to copy text to clipboard
			//Credit: https://stackoverflow.com/questions/22581345/click-button-copy-to-clipboard
			//Credit: https://stackoverflow.com/questions/61092432/display-success-message-after-copying-url-to-clipboard
			function copyToClipboard(elementId, num) {
				// Create a "hidden" input
				var aux = document.createElement("input");
				// Assign it the value of the specified element
				aux.setAttribute("value", document.getElementById(elementId).getAttribute('data-value'));
				// Append it to the body
				document.body.appendChild(aux);
				// Highlight its content
				aux.select();
				// Copy the highlighted text
				document.execCommand("copy");
				// Remove it from the body
				document.body.removeChild(aux);

				if (num == 1) {
					document.getElementById("custom-tooltip-1").style.display = "inline";
					setTimeout( function() {
						document.getElementById("custom-tooltip-1").style.display = "none";
					}, 1000);
				} else {
					document.getElementById("custom-tooltip-2").style.display = "inline";
					setTimeout( function() {
						document.getElementById("custom-tooltip-2").style.display = "none";
					}, 1000);
				}
			}
		</script>
	</body>
</html>