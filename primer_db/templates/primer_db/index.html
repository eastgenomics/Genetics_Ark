{% extends 'base.html' %}
{% load render_table from django_tables2 %}
{% load static %}


{% block body_block %}

<body style="padding-top: 80px; padding-left: 80px">

<!-- success message when primer is deleted from edit_primer and returns to index -->


{% if messages %} 
    {% for message in messages %}
        {% if 'error' in message.tags %}
            <div class="alert alert-danger" role="alert">
                <strong>{{ message }}</strong> 
            </div>
        {% endif %}

        {% if 'success' in message.tags %}
        <div class="alert alert-success" role="alert">
            <strong>{{ message }}</strong> 
        </div>
        {% endif %}
    {% endfor %}
{% endif %} 


<span style="float:right;">
    <a href="/primer_db/help" target="_blank">
    <img style="width: 50px; height: 100px; padding-top: 10px" alt="Image" src="{% static 'images/gif2.gif' %}"/>
    </a>
</span>
    

<h1>Primer Database</h1></br>


<div class="row center-block">

<a href="/primer_db/submit"><button type="button" class = "bt btn-primary">Submit single primer</button></a>

<a href="/primer_db/submit_pair"><button type="button" class = "bt btn-primary">Submit primer pair</button></a></br></br>

<!-- form for primer name filter -->

<form type="get" action="" style="padding-top:10px;">
    <input type="text" name="name_filter" placeholder="Search primer name">
    <button id="search_submit" type="submit">Submit</button>&nbsp;&nbsp;&nbsp;
    
<form type="get" action="" style="padding-top:10px;">
    <input type="text" name="gene_filter" placeholder="Search exact gene name">
    <button id="search_submit" type="submit">Submit</button>
</form></br>


<!-- form for variant position filter -->
<form type="get" action="" style="padding-top:5px;">
  Chromosome no: <select name="chrom_no"> 
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="X">X</option>
        <option value="Y">Y</option>
  </select>&nbsp;&nbsp;
    <input type="text" name="var_pos" placeholder="Search variant position:">
    <button id="search_submit" type="submit">Submit</button>
</form></br>

{% if var_pos and chrom_no %}
  Showing results for position {{ var_pos }} on chromosome {{ chrom_no }} </br></br>
{% endif %}


<form action="" method="post">
    
    {% csrf_token %}

    Change primer status: 

    <select name="new_status">
        <option value="Archived">Archived</option>
        <option value="On Order">On Order</option>
        <option value="In Bank">In Bank</option>
    </select>
    
    <button type="submit" name="change_status"/>Submit</button></br></br>
    
    Select primer pair to recalculate coverage: 

    <input type="submit" name="recalc" value="Recalculate"></br></br>
    
    {% if recalc %}
        <ul>
            {% for ele in recalc %}
                <li>{{ ele }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% render_table table %}

</form>


</html>
</body>
</br>




<a href="/primer_db/"><button type="button" class = "bt btn-primary">View all</button></a></br></br>

Total primers in bank: {{ total_bank }}</br>
Total primers on order: {{ total_order }}</br>
Total primers in archive: {{ total_archived }}

{% endblock %}

